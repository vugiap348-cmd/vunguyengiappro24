<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ƒê·ªÅ Ki·ªÉm Tra L·ªãch S·ª≠ - ƒê·ªÅ S·ªë 23</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400&family=Playfair+Display:ital,wght@0,600;0,700;1,600&display=swap');

:root {
  --ink: #1c1c2e;
  --ink2: #2d2d44;
  --mid: #5a5a7a;
  --soft: #9090aa;
  --bg: #f4f3f8;
  --bg2: #eceaf4;
  --card: #ffffff;
  --border: #dddae8;
  --red: #d63031;
  --red2: #b52a2a;
  --red-bg: #fff0f0;
  --gold: #e17025;
  --gold-bg: #fff7ed;
  --green: #00856f;
  --green-bg: #e8f8f5;
  --blue: #2d5be3;
  --blue-bg: #edf2ff;
  --shadow-sm: 0 2px 8px rgba(28,28,46,0.07);
  --shadow: 0 4px 20px rgba(28,28,46,0.10);
  --shadow-lg: 0 12px 40px rgba(28,28,46,0.15);
  --radius: 14px;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { scroll-behavior: smooth; }

body {
  font-family: 'Be Vietnam Pro', sans-serif;
  background: var(--bg);
  color: var(--ink);
  min-height: 100vh;
  font-size: 15px;
  line-height: 1.6;
}

/* ‚îÄ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ‚îÄ */
.hdr {
  position: sticky; top: 0; z-index: 90;
  background: var(--ink);
  box-shadow: 0 2px 20px rgba(0,0,0,0.25);
}
.hdr-inner {
  max-width: 980px; margin: 0 auto;
  padding: 12px 20px;
  display: flex; align-items: center; justify-content: space-between; gap: 14px; flex-wrap: wrap;
}
.hdr-left { display: flex; align-items: center; gap: 12px; }
.hdr-tag {
  background: var(--red); color: #fff;
  font-size: 0.68rem; font-weight: 800;
  padding: 4px 10px; border-radius: 6px;
  letter-spacing: 0.08em; text-transform: uppercase; white-space: nowrap;
}
.hdr-title {
  font-family: 'Playfair Display', serif;
  font-size: 1.05rem; color: #fff; font-weight: 700;
}
.hdr-title small {
  display: block; font-family: 'Be Vietnam Pro', sans-serif;
  font-size: 0.68rem; font-weight: 400; color: rgba(255,255,255,0.5);
  letter-spacing: 0.05em; text-transform: uppercase; margin-bottom: 2px;
}
.hdr-right { display: flex; align-items: center; gap: 12px; }
.hdr-progress-info {
  font-size: 0.78rem; color: rgba(255,255,255,0.65); font-weight: 500;
  background: rgba(255,255,255,0.08); border-radius: 8px;
  padding: 6px 12px; white-space: nowrap;
}
.hdr-progress-info strong { color: #fff; }

/* Timer */
.timer-box {
  display: flex; align-items: center; gap: 8px;
  background: rgba(255,255,255,0.10);
  border: 1.5px solid rgba(255,255,255,0.18);
  border-radius: 10px; padding: 7px 14px;
}
.timer-icon { font-size: 1rem; }
.timer-val {
  font-family: 'Playfair Display', serif;
  font-size: 1.18rem; font-weight: 700;
  color: #fff; letter-spacing: 0.04em; min-width: 60px;
  transition: color 0.3s;
}
.timer-val.warn { color: #f39c12; }
.timer-val.danger { color: #ff6b6b; animation: blink .7s infinite; }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:.5} }

/* Progress bar */
.hdr-prog-bar { height: 3px; background: rgba(255,255,255,0.1); }
.hdr-prog-fill {
  height: 3px;
  background: linear-gradient(90deg, #e17025, #d63031);
  width: 0%; transition: width .4s ease;
}

/* ‚îÄ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ‚îÄ */
.main { max-width: 980px; margin: 0 auto; padding: 28px 16px 80px; }

/* Section Header */
.sec-hdr {
  display: flex; align-items: center; gap: 12px;
  margin: 32px 0 16px;
}
.sec-hdr:first-child { margin-top: 0; }
.sec-pill {
  background: linear-gradient(135deg, var(--ink), var(--ink2));
  color: #fff; font-size: 0.72rem; font-weight: 800;
  padding: 5px 14px; border-radius: 20px;
  letter-spacing: 0.07em; text-transform: uppercase; white-space: nowrap;
}
.sec-line { flex: 1; height: 1.5px; background: linear-gradient(90deg, var(--border), transparent); }
.sec-note {
  font-size: 0.84rem; color: var(--mid); line-height: 1.65;
  background: var(--gold-bg); border-left: 3px solid var(--gold);
  border-radius: 0 8px 8px 0; padding: 10px 16px; margin-bottom: 18px;
}

/* ‚îÄ‚îÄ‚îÄ Q CARD ‚îÄ‚îÄ‚îÄ */
.qcard {
  background: var(--card); border: 1.5px solid var(--border);
  border-radius: var(--radius); padding: 20px 22px;
  margin-bottom: 14px; box-shadow: var(--shadow-sm);
  transition: border-color .2s, box-shadow .2s, transform .15s;
  position: relative;
}
.qcard:hover { box-shadow: var(--shadow); transform: translateY(-1px); }
.qcard.done { border-left: 4px solid var(--gold); }
.qcard.ok { border-left: 4px solid var(--green); background: var(--green-bg); }
.qcard.bad { border-left: 4px solid var(--red); background: var(--red-bg); }

.qnum {
  font-size: 0.68rem; font-weight: 800; color: var(--red);
  letter-spacing: 0.1em; text-transform: uppercase;
  display: flex; align-items: center; gap: 8px; margin-bottom: 8px;
}
.qnum::after { content:''; flex:1; height:1px; background:var(--border); }

.qtag {
  position: absolute; top: 14px; right: 16px;
  font-size: 0.68rem; font-weight: 800; padding: 3px 9px;
  border-radius: 20px; display: none; letter-spacing: .04em;
}
.qtag.show { display: inline-block; }
.qtag.ok { background: var(--green-bg); color: var(--green); border: 1px solid var(--green); }
.qtag.bad { background: var(--red-bg); color: var(--red); border: 1px solid var(--red); }
.qtag.skip { background: #f0f0f0; color: var(--soft); border: 1px solid #ccc; }

.qtext {
  font-size: 0.95rem; line-height: 1.75; color: var(--ink); margin-bottom: 14px;
  font-weight: 500;
}

/* Options */
.opts { display: grid; grid-template-columns: 1fr 1fr; gap: 9px; }
@media(max-width:560px){ .opts { grid-template-columns: 1fr; } }

.opt {
  display: flex; align-items: flex-start; gap: 10px;
  padding: 10px 13px; border: 1.5px solid var(--border);
  border-radius: 9px; cursor: pointer;
  transition: all .17s; background: var(--bg);
  font-size: 0.88rem; line-height: 1.5; color: var(--mid);
  user-select: none;
}
.opt input { display: none; }
.opt:hover:not(.dis) {
  border-color: var(--blue); background: var(--blue-bg); color: var(--ink);
  transform: translateX(2px);
}
.opt-k {
  min-width: 22px; height: 22px; border-radius: 50%;
  background: var(--border); color: var(--soft);
  font-weight: 800; font-size: 0.72rem;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0; margin-top: 1px; transition: all .17s;
}
.opt.sel { border-color: var(--ink2); background: var(--bg2); color: var(--ink); }
.opt.sel .opt-k { background: var(--ink2); color: #fff; }
.opt.cor { border-color: var(--green); background: var(--green-bg); color: var(--green); }
.opt.cor .opt-k { background: var(--green); color: #fff; }
.opt.wrg { border-color: var(--red); background: var(--red-bg); color: var(--red); text-decoration: line-through; text-decoration-color: rgba(214,48,49,.4); }
.opt.wrg .opt-k { background: var(--red); color: #fff; }
.opt.dis { cursor: default; }

/* ‚îÄ‚îÄ‚îÄ PART 2 ‚îÄ‚îÄ‚îÄ */
.p2card {
  background: var(--card); border: 1.5px solid var(--border);
  border-radius: var(--radius); padding: 22px 22px;
  margin-bottom: 18px; box-shadow: var(--shadow-sm);
}
.p2-intro { font-size: 0.88rem; color: var(--mid); font-weight: 600; margin-bottom: 10px; }

.quote-box {
  background: linear-gradient(135deg, rgba(28,28,46,.03), rgba(225,112,37,.05));
  border-left: 4px solid var(--ink2); border-radius: 0 10px 10px 0;
  padding: 16px 20px; margin: 10px 0 16px;
  font-size: 0.90rem; line-height: 1.85;
  color: var(--ink2); position: relative;
  font-style: italic;
}
.quote-box::before {
  content: '\201C'; position: absolute; top: -6px; left: 12px;
  font-size: 2.8rem; color: var(--ink2); opacity: .13;
  font-family: Georgia, serif; line-height: 1;
}
.quote-src {
  display: block; margin-top: 10px;
  font-size: 0.76rem; color: var(--soft);
  font-style: normal; text-align: right; font-weight: 500;
  font-family: 'Be Vietnam Pro', sans-serif;
}

/* Table */
.tbl-wrap { overflow-x: auto; margin: 10px 0 16px; }
.p2-tbl { width: 100%; border-collapse: collapse; font-size: 0.86rem; min-width: 440px; }
.p2-tbl th {
  background: var(--ink); color: #fff;
  padding: 9px 14px; text-align: left;
  font-weight: 700; font-size: 0.78rem; letter-spacing: 0.03em;
}
.p2-tbl td {
  padding: 9px 14px; border-bottom: 1px solid var(--border);
  vertical-align: top; line-height: 1.65; color: var(--mid);
}
.p2-tbl tr:nth-child(even) td { background: rgba(28,28,46,0.025); }
.p2-tbl td:first-child { font-weight: 700; color: var(--ink); white-space: nowrap; font-size: 0.8rem; }

/* Sub items */
.sub {
  padding: 13px 15px; border: 1.5px solid var(--border);
  border-radius: 10px; margin-bottom: 10px;
  background: rgba(255,255,255,.6); transition: all .2s;
}
.sub.done { border-left: 3px solid var(--gold); }
.sub.ok { background: var(--green-bg); border-color: var(--green); }
.sub.bad { background: var(--red-bg); border-color: var(--red); }
.sub-lbl { font-size: 0.7rem; font-weight: 800; color: var(--red); letter-spacing: .08em; text-transform: uppercase; margin-bottom: 6px; }
.sub-txt { font-size: 0.9rem; line-height: 1.65; color: var(--ink); margin-bottom: 9px; }
.tf-row { display: flex; gap: 10px; flex-wrap: wrap; }

.tf-btn {
  display: flex; align-items: center; gap: 7px;
  padding: 7px 20px; border: 1.5px solid var(--border);
  border-radius: 8px; cursor: pointer; font-size: 0.88rem;
  font-weight: 700; transition: all .17s; color: var(--mid);
  user-select: none; background: var(--bg);
}
.tf-btn input { display: none; }
.tf-btn:hover:not(.dis) { border-color: var(--ink); color: var(--ink); transform: translateY(-1px); background: var(--card); }
.tf-btn.sel-t { border-color: var(--green); background: var(--green-bg); color: var(--green); box-shadow: 0 2px 8px rgba(0,133,111,.15); }
.tf-btn.sel-f { border-color: var(--red); background: var(--red-bg); color: var(--red); box-shadow: 0 2px 8px rgba(214,48,49,.15); }
.tf-btn.cor-tf { border-color: var(--green); background: var(--green-bg); color: var(--green); }
.tf-btn.wrg-tf { border-color: var(--red); background: var(--red-bg); color: var(--red); }
.tf-btn.dis { cursor: default; }

.sub-note {
  font-size: 0.78rem; font-weight: 700; margin-top: 7px; display: none;
}
.sub-note.show { display: block; }
.sub-note.ok { color: var(--green); }
.sub-note.bad { color: var(--red); }

/* ‚îÄ‚îÄ‚îÄ SUBMIT AREA ‚îÄ‚îÄ‚îÄ */
.submit-area { text-align: center; padding: 36px 0 10px; }
.btn-sub {
  position: relative; overflow: hidden;
  background: linear-gradient(135deg, #d63031, #a01010);
  color: #fff; border: none; border-radius: 50px;
  padding: 16px 56px; font-size: 1rem; font-weight: 800;
  font-family: 'Be Vietnam Pro', sans-serif;
  cursor: pointer; letter-spacing: 0.06em; text-transform: uppercase;
  box-shadow: 0 8px 28px rgba(214,48,49,.38);
  transition: all .2s;
}
.btn-sub::before {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,.15), transparent);
}
.btn-sub:hover { transform: translateY(-3px); box-shadow: 0 14px 36px rgba(214,48,49,.45); }
.btn-sub:active { transform: translateY(0); }
.btn-sub:disabled { opacity: .55; cursor: not-allowed; transform: none; box-shadow: none; }

.btn-retry {
  background: linear-gradient(135deg, var(--ink), var(--ink2));
  color: #fff; border: none; border-radius: 50px;
  padding: 13px 38px; font-size: 0.92rem; font-weight: 800;
  font-family: 'Be Vietnam Pro', sans-serif; cursor: pointer;
  letter-spacing: 0.05em; text-transform: uppercase;
  box-shadow: 0 6px 20px rgba(28,28,46,.3);
  transition: all .2s; margin-top: 16px;
}
.btn-retry:hover { transform: translateY(-2px); box-shadow: 0 10px 28px rgba(28,28,46,.38); }

/* ‚îÄ‚îÄ‚îÄ RESULT PANEL ‚îÄ‚îÄ‚îÄ */
.result-panel {
  display: none; background: var(--card);
  border: 2px solid var(--border); border-radius: 20px;
  padding: 36px 28px; margin-bottom: 28px;
  box-shadow: var(--shadow-lg); text-align: center;
  animation: fadeUp .5s ease;
}
.result-panel.show { display: block; }
@keyframes fadeUp { from{opacity:0;transform:translateY(-18px)} to{opacity:1;transform:translateY(0)} }

.res-emoji { font-size: 3rem; margin-bottom: 6px; }
.res-title {
  font-family: 'Playfair Display', serif;
  font-size: 1.45rem; font-weight: 700; color: var(--ink); margin-bottom: 4px;
}
.res-sub { font-size: .85rem; color: var(--soft); margin-bottom: 16px; }
.res-score-big {
  font-family: 'Playfair Display', serif;
  font-size: 4rem; font-weight: 700; line-height: 1; margin-bottom: 4px;
}
.res-score-big.great { color: var(--green); }
.res-score-big.mid { color: var(--gold); }
.res-score-big.low { color: var(--red); }
.res-unit { font-size: .82rem; color: var(--soft); margin-bottom: 20px; }

.res-breakdown {
  display: flex; justify-content: center; gap: 24px;
  margin: 0 0 18px; flex-wrap: wrap;
}
.res-bk { text-align: center; min-width: 70px; }
.res-bk-val {
  font-family: 'Playfair Display', serif;
  font-size: 1.9rem; font-weight: 700; line-height: 1; margin-bottom: 3px;
}
.res-bk-val.g { color: var(--green); }
.res-bk-val.r { color: var(--red); }
.res-bk-val.o { color: var(--gold); }
.res-bk-lbl { font-size: .72rem; color: var(--soft); font-weight: 700; text-transform: uppercase; letter-spacing: .05em; }

.res-bar-wrap { max-width: 340px; margin: 0 auto 16px; }
.res-bar-bg { background: var(--bg2); border-radius: 20px; height: 8px; overflow: hidden; }
.res-bar-fill { height: 8px; border-radius: 20px; background: linear-gradient(90deg, var(--green), #52c41a); transition: width 1.2s cubic-bezier(.22,1,.36,1); width: 0%; }
.res-bar-fill.mid { background: linear-gradient(90deg, var(--gold), #f9ca24); }
.res-bar-fill.low { background: linear-gradient(90deg, var(--red), #fd79a8); }
.res-pct { font-size: .78rem; color: var(--mid); margin-top: 5px; }

.res-msg { font-size: .92rem; color: var(--mid); font-style: italic; line-height: 1.7; margin: 4px 0 6px; }

/* ‚îÄ‚îÄ‚îÄ MODAL OVERLAYS ‚îÄ‚îÄ‚îÄ */
.overlay {
  display: none; position: fixed; inset: 0;
  background: rgba(28,28,46,.72); backdrop-filter: blur(6px);
  z-index: 200; align-items: center; justify-content: center;
  animation: fadeIn .35s ease;
}
.overlay.show { display: flex; }
@keyframes fadeIn { from{opacity:0} to{opacity:1} }

/* Confirm Modal */
.modal {
  background: var(--card); border-radius: 20px;
  padding: 36px 32px 28px; max-width: 400px; width: 90%;
  box-shadow: 0 24px 64px rgba(0,0,0,0.25);
  text-align: center; animation: popIn .35s cubic-bezier(.34,1.56,.64,1);
}
@keyframes popIn { from{opacity:0;transform:scale(.85)} to{opacity:1;transform:scale(1)} }
.modal-icon { font-size: 2.6rem; margin-bottom: 10px; }
.modal-title {
  font-family: 'Playfair Display', serif;
  font-size: 1.22rem; font-weight: 700; color: var(--ink); margin-bottom: 6px;
}
.modal-msg { font-size: .88rem; color: var(--mid); line-height: 1.7; margin-bottom: 22px; }
.modal-stats {
  display: flex; gap: 12px; justify-content: center;
  margin-bottom: 22px; flex-wrap: wrap;
}
.modal-stat {
  background: var(--bg); border: 1px solid var(--border);
  border-radius: 10px; padding: 10px 16px; min-width: 80px;
}
.modal-stat-v { font-size: 1.35rem; font-weight: 800; color: var(--ink); line-height: 1; font-family: 'Playfair Display', serif; }
.modal-stat-l { font-size: .7rem; color: var(--soft); text-transform: uppercase; font-weight: 700; letter-spacing: .05em; margin-top: 2px; }
.modal-stat-v.ok { color: var(--green); }
.modal-stat-v.warn { color: var(--red); }
.modal-btns { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
.modal-btn {
  padding: 11px 26px; border-radius: 50px; border: none;
  font-size: .88rem; font-weight: 800; cursor: pointer;
  font-family: 'Be Vietnam Pro', sans-serif; letter-spacing: .04em;
  text-transform: uppercase; transition: all .18s;
}
.modal-btn.primary {
  background: linear-gradient(135deg, #d63031, #a01010);
  color: #fff; box-shadow: 0 4px 16px rgba(214,48,49,.3);
}
.modal-btn.primary:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(214,48,49,.4); }
.modal-btn.sec {
  background: var(--bg2); color: var(--ink);
  border: 1.5px solid var(--border);
}
.modal-btn.sec:hover { background: var(--border); }

/* Time up modal */
.timeup-modal {
  background: linear-gradient(135deg, #1c1c2e, #2d2d44);
  border-radius: 20px; padding: 40px 32px;
  max-width: 380px; width: 90%;
  box-shadow: 0 24px 64px rgba(0,0,0,0.4);
  text-align: center; animation: popIn .4s cubic-bezier(.34,1.56,.64,1);
}
.timeup-icon { font-size: 3.5rem; margin-bottom: 12px; }
.timeup-title {
  font-family: 'Playfair Display', serif;
  font-size: 1.4rem; font-weight: 700; color: #fff; margin-bottom: 8px;
}
.timeup-msg { font-size: .88rem; color: rgba(255,255,255,.6); line-height: 1.7; }
.timeup-countdown {
  font-family: 'Playfair Display', serif;
  font-size: 2rem; font-weight: 700; color: #ff6b6b;
  margin: 14px 0 0; letter-spacing: 0.05em;
}
.timeup-bar-wrap { margin-top: 16px; background: rgba(255,255,255,.1); border-radius: 20px; height: 4px; overflow: hidden; }
.timeup-bar { height: 4px; background: #ff6b6b; width: 100%; border-radius: 20px; transition: width .1s linear; }

/* Unanswered strip */
.unans-strip {
  display: none; background: var(--gold-bg);
  border: 1.5px solid var(--gold); border-radius: 10px;
  padding: 12px 16px; font-size: .85rem; color: #7a4a10;
  line-height: 1.6; margin-bottom: 18px;
}
.unans-strip.show { display: block; }
</style>
</head>
<body>

<!-- HEADER -->
<div class="hdr">
  <div class="hdr-inner">
    <div class="hdr-left">
      <div class="hdr-tag">L·ªãch S·ª≠</div>
      <div class="hdr-title">
        <small>B√†i Ki·ªÉm Tra</small>
        ƒê·ªÅ S·ªë 23
      </div>
    </div>
    <div class="hdr-right">
      <div class="hdr-progress-info" id="progInfo">ƒê√£ tr·∫£ l·ªùi <strong id="doneCount">0</strong>/40</div>
      <div class="timer-box">
        <span class="timer-icon">‚è±</span>
        <div class="timer-val" id="timerVal">45:00</div>
      </div>
    </div>
  </div>
  <div class="hdr-prog-bar"><div class="hdr-prog-fill" id="progFill"></div></div>
</div>

<!-- TIME UP OVERLAY -->
<div class="overlay" id="timeupOverlay">
  <div class="timeup-modal">
    <div class="timeup-icon">‚è∞</div>
    <div class="timeup-title">H·∫øt Th·ªùi Gian!</div>
    <div class="timeup-msg">B√†i ki·ªÉm tra ƒë√£ t·ª± ƒë·ªông n·ªôp.<br>ƒêang t√≠nh k·∫øt qu·∫£ c·ªßa b·∫°n‚Ä¶</div>
    <div class="timeup-countdown" id="timeupCd">3</div>
    <div class="timeup-bar-wrap"><div class="timeup-bar" id="timeupBar"></div></div>
  </div>
</div>

<!-- CONFIRM SUBMIT OVERLAY -->
<div class="overlay" id="confirmOverlay">
  <div class="modal">
    <div class="modal-icon" id="confIcon">üìã</div>
    <div class="modal-title" id="confTitle">X√°c nh·∫≠n n·ªôp b√†i</div>
    <div class="modal-msg" id="confMsg">Vui l√≤ng ki·ªÉm tra th·ªëng k√™ tr∆∞·ªõc khi n·ªôp.</div>
    <div class="modal-stats">
      <div class="modal-stat">
        <div class="modal-stat-v ok" id="confDone">0</div>
        <div class="modal-stat-l">ƒê√£ l√†m</div>
      </div>
      <div class="modal-stat">
        <div class="modal-stat-v warn" id="confLeft">0</div>
        <div class="modal-stat-l">B·ªè tr·ªëng</div>
      </div>
      <div class="modal-stat">
        <div class="modal-stat-v" id="confTime">--</div>
        <div class="modal-stat-l">C√≤n l·∫°i</div>
      </div>
    </div>
    <div class="modal-btns">
      <button class="modal-btn sec" onclick="closeConfirm()">‚Üê L√†m ti·∫øp</button>
      <button class="modal-btn primary" onclick="doSubmit()">N·ªôp b√†i ngay ‚úì</button>
    </div>
  </div>
</div>

<!-- MAIN -->
<div class="main" id="mainWrap">

  <!-- RESULT -->
  <div class="result-panel" id="resPanel">
    <div class="res-emoji" id="resEmoji">üéØ</div>
    <div class="res-title">K·∫øt Qu·∫£ B√†i Ki·ªÉm Tra</div>
    <div class="res-sub" id="resSub">ƒê·ªÅ S·ªë 23 ‚Äî L·ªãch S·ª≠</div>
    <div class="res-score-big" id="resBig">0.00</div>
    <div class="res-unit">ƒëi·ªÉm / 10</div>
    <div class="res-bar-wrap">
      <div class="res-bar-bg"><div class="res-bar-fill" id="resBar"></div></div>
      <div class="res-pct" id="resPct"></div>
    </div>
    <div class="res-breakdown">
      <div class="res-bk">
        <div class="res-bk-val g" id="rkC1">0</div>
        <div class="res-bk-lbl">P.I ƒê√∫ng</div>
      </div>
      <div class="res-bk">
        <div class="res-bk-val r" id="rkW1">0</div>
        <div class="res-bk-lbl">P.I Sai</div>
      </div>
      <div class="res-bk">
        <div class="res-bk-val o" id="rkP2">0.00</div>
        <div class="res-bk-lbl">ƒêi·ªÉm P.II</div>
      </div>
    </div>
    <div class="res-msg" id="resMsg"></div>
    <button class="btn-retry" onclick="retryExam()">üîÑ L√†m l·∫°i (c√¢u h·ªèi ng·∫´u nhi√™n)</button>
  </div>

  <div class="unans-strip" id="unansStrip">
    ‚ö†Ô∏è B·∫°n c√≤n <strong id="unansNum">0</strong> c√¢u ch∆∞a tr·∫£ l·ªùi. H√£y ki·ªÉm tra l·∫°i ho·∫∑c x√°c nh·∫≠n n·ªôp b√†i.
  </div>

  <!-- PART 1 -->
  <div class="sec-hdr">
    <div class="sec-pill">Ph·∫ßn I</div>
    <div class="sec-line"></div>
  </div>
  <div class="sec-note">C√¢u 1 ƒë·∫øn 24 ‚Äî M·ªói c√¢u ch·ªâ ch·ªçn <strong>m·ªôt ph∆∞∆°ng √°n</strong>. M·ªói c√¢u ƒë√∫ng: <strong>0,25 ƒëi·ªÉm</strong>.</div>
  <div id="p1Wrap"></div>

  <!-- PART 2 -->
  <div class="sec-hdr">
    <div class="sec-pill">Ph·∫ßn II</div>
    <div class="sec-line"></div>
  </div>
  <div class="sec-note">C√¢u 1 ƒë·∫øn 4 ‚Äî M·ªói √Ω ch·ªçn <strong>ƒê√∫ng / Sai</strong>. &nbsp;|&nbsp; 1 ƒë√∫ng: 0,1ƒë &nbsp;|&nbsp; 2 ƒë√∫ng: 0,25ƒë &nbsp;|&nbsp; 3 ƒë√∫ng: 0,5ƒë &nbsp;|&nbsp; 4 ƒë√∫ng: 1,0ƒë</div>
  <div id="p2Wrap"></div>

  <div class="submit-area">
    <button class="btn-sub" id="btnSub" onclick="openConfirm()">üìù &nbsp; N·ªòP B√ÄI</button>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const P1 = [
  {id:1, q:"Nh√¢n v·∫≠t l·ªãch s·ª≠ n√†o sau ƒë√¢y ƒë√£ l√£nh ƒë·∫°o ng∆∞·ªùi Vi·ªát ƒë√°nh ƒë·ªï √°ch th·ªëng tr·ªã c·ªßa tri·ªÅu ƒë·∫°i phong ki·∫øn ph∆∞∆°ng B·∫Øc?", opts:{A:"Tri·ªáu Quang Ph·ª•c.",B:"ƒêinh B·ªô Lƒ©nh.",C:"L√™ Th√°nh T√¥ng.",D:"L√Ω Ph·∫≠t T·ª≠."}, ans:"A"},
  {id:2, q:"N·ªôi dung n√†o sau ƒë√¢y ƒë√£ ph·∫£n √°nh ƒë√∫ng √Ω nghƒ©a c·ªßa kh·ªüi nghƒ©a Kh√∫c Th·ª´a D·ª• ƒë·ªëi v·ªõi d√¢n t·ªôc Vi·ªát Nam (ƒë·∫ßu th·∫ø k·ª∑ X)?", opts:{A:"Gi√†nh l·∫°i n·ªÅn ƒë·ªôc l·∫≠p l√¢u d√†i, b·ªÅn v·ªØng.",B:"Ch·∫•m d·ª©t th·ªùi k·ª≥ phong ki·∫øn B·∫Øc thu·ªôc.",C:"M·ªü ra k·ªâ nguy√™n m·ªõi cho l·ªãch s·ª≠ d√¢n t·ªôc.",D:"ƒê√£ cƒÉn b·∫£n kh√¥i ph·ª•c ch·ªß quy·ªÅn d√¢n t·ªôc."}, ans:"D"},
  {id:3, q:"Nh·∫±m tƒÉng c∆∞·ªùng s·ª©c m·∫°nh qu√¢n s·ª± ƒë·ªÉ ƒë·ªëi ph√≥ v·ªõi cu·ªôc x√¢m l∆∞·ª£c c·ªßa nh√† Minh cu·ªëi th·∫ø k·ªâ XIV, H·ªì Qu√Ω Ly ƒë√£ ti·∫øn h√†nh", opts:{A:"c·∫£i c√°ch vƒÉn ho√°, x√£ h·ªôi, gi√°o d·ª•c.",B:"x√¢y d·ª±ng to√† th√†nh T√¢y ƒê√¥ ki√™n c·ªë.",C:"bu·ªôc vua Tr·∫ßn nh∆∞·ªùng ng√¥i cho m√¨nh.",D:"ban h√†nh ch√≠nh s√°ch h·∫°n ƒëi·ªÅn, h·∫°n n√¥."}, ans:"B"},
  {id:4, q:"N·ªôi dung n√†o sau ƒë√¢y kh√¥ng ph·∫£i l√† kh√≥ khƒÉn c·ªßa tri·ªÅu ƒë·∫°i nh√† Tr·∫ßn ·ªü n·ª≠a sau th·∫ø k·ªâ XIV?", opts:{A:"Gi·∫∑c Minh lƒÉm le sang x√¢m l∆∞·ª£c, qu√¢n ChƒÉm-pa t·∫•n c√¥ng.",B:"H·ªì Qu√Ω Ly ƒë√£ ti·∫øn h√†nh cu·ªôc c·∫£i c√°ch tr√™n nhi·ªÅu lƒ©nh v·ª±c.",C:"H·∫°n h√°n, l≈© l·ª•t, m·∫•t m√πa, ƒë√≥i k√©m x·∫£y ra ·ªü nhi·ªÅu ƒë·ªãa ph∆∞∆°ng.",D:"Nhi·ªÅu cu·ªôc kh·ªüi nghƒ©a n√¥ng d√¢n di·ªÖn ra ch·ªëng l·∫°i tri·ªÅu ƒë√¨nh."}, ans:"B"},
  {id:5, q:"H·ªôi ngh·ªã qu·ªëc t·∫ø Xan Phran-xi-xc√¥ (M·ªπ) nƒÉm 1945 ƒë√£ th√¥ng qua vƒÉn ki·ªán n√†o sau ƒë√¢y?", opts:{A:"Hi·∫øn ch∆∞∆°ng Li√™n h·ª£p qu·ªëc.",B:"Hi·ªáp ƒë·ªãnh ƒë√¨nh chi·∫øn ·ªü Tri·ªÅu Ti√™n.",C:"Hi·∫øn ch∆∞∆°ng ASEAN.",D:"Hi·ªáp ƒë·ªãnh ƒë√¨nh chi·∫øn ·ªü ƒê√¥ng D∆∞∆°ng."}, ans:"A"},
  {id:6, q:"N·ªôi dung n√†o sau ƒë√¢y l√† vai tr√≤ c·ªßa Li√™n h·ª£p qu·ªëc v·ªÅ b·∫£o ƒë·∫£m quy·ªÅn con ng∆∞·ªùi, ph√°t tri·ªÉn vƒÉn h√≥a, x√£ h·ªôi?", opts:{A:"TƒÉng c∆∞·ªùng b√¨nh ƒë·∫≥ng gi·ªõi v√† v·ªã th·∫ø, nƒÉng l·ª±c c·ªßa ph·ª• n·ªØ.",B:"Gi·∫£m l√£i su·∫•t cho vay ·ªü h·∫ßu h·∫øt c√°c n∆∞·ªõc ƒëang ph√°t tri·ªÉn.",C:"C·∫£i thi·ªán nƒÉng l·ª±c c√¥ng ngh·ªá th√¥ng tin cho m·ªçi ng∆∞·ªùi d√¢n.",D:"Ho√†n th√†nh ph·ªï c·∫≠p gi√°o d·ª•c ƒë·∫°i h·ªçc ·ªü c√°c n∆∞·ªõc ph√°t tri·ªÉn."}, ans:"A"},
  {id:7, q:"ƒê·∫ßu nh·ªØng nƒÉm 60 c·ªßa th·∫ø k·ªâ XX, t·ªï ch·ª©c n√†o sau ƒë√¢y ƒë∆∞·ª£c th√†nh l·∫≠p ·ªü khu v·ª±c ƒê√¥ng Nam √Å?", opts:{A:"T·ªï ch·ª©c MAPHILINDO.",B:"Li√™n minh Ch√¢u √Çu.",C:"Di·ªÖn ƒë√†n h·ª£p t√°c √Å - √Çu.",D:"T·ªï ch·ª©c Th∆∞∆°ng m·∫°i th·∫ø gi·ªõi."}, ans:"A"},
  {id:8, q:"Ng√†y 8/8/1967, t·ªï ch·ª©c Hi·ªáp h·ªôi c√°c qu·ªëc gia ƒê√¥ng Nam √Å (ASEAN) ƒë∆∞·ª£c th√†nh l·∫≠p l√† bi·ªÉu hi·ªán c·ªßa xu th·∫ø n√†o sau ƒë√¢y?", opts:{A:"Li√™n k·∫øt khu v·ª±c.",B:"To√†n c·∫ßu h√≥a.",C:"H√≤a ho√£n ƒê√¥ng-T√¢y.",D:"Li√™n minh qu√¢n s·ª±."}, ans:"A"},
  {id:9, q:"APSC l√† t√™n vi·∫øt t·∫Øt b·∫±ng ti·∫øng Anh c·ªßa", opts:{A:"C·ªông ƒë·ªìng Kinh t·∫ø ASEAN.",B:"C·ªông ƒë·ªìng Ch√≠nh tr·ªã - An ninh ASEAN.",C:"C·ªông ƒë·ªìng VƒÉn h√≥a ‚Äì X√£ h·ªôi ASEAN",D:"Hi·ªáp h·ªôi c√°c qu·ªëc gia ƒê√¥ng Nam √Å."}, ans:"B"},
  {id:10, q:"Trong giai ƒëo·∫°n 1975-1979, qu√¢n d√¢n Vi·ªát Nam ƒë·∫•u tranh ch·ªëng l·∫°i cu·ªôc t·∫•n c√¥ng x√¢m l·∫•n bi√™n gi·ªõi T√¢y Nam c·ªßa l·ª±c l∆∞·ª£ng n√†o sau ƒë√¢y?", opts:{A:"T·∫≠p ƒëo√†n Kh∆°me ƒë·ªè.",B:"Th·ª±c d√¢n H√† Lan.",C:"Qu√¢n ƒë·ªôi S√†i G√≤n.",D:"Qu√¢n ƒë·ªôi Trung Qu·ªëc."}, ans:"A"},
  {id:11, q:"NƒÉm 1979, qu√¢n d√¢n Vi·ªát Nam ƒë·∫•u tranh ch·ªëng l·∫°i cu·ªôc t·∫•n c√¥ng x√¢m l·∫•n bi√™n gi·ªõi ph√≠a B·∫Øc c·ªßa l·ª±c l∆∞·ª£ng n√†o sau ƒë√¢y?", opts:{A:"Qu√¢n ƒë·ªôi Trung Qu·ªëc.",B:"Qu√¢n ƒë·ªôi Ph√°p.",C:"Th·ª±c d√¢n H√† Lan.",D:"Qu√¢n ƒë·ªôi S√†i G√≤n."}, ans:"A"},
  {id:12, q:"Cu·ªôc ƒë·∫•u tranh b·∫£o v·ªá T·ªï qu·ªëc c·ªßa nh√¢n d√¢n Vi·ªát Nam giai ƒëo·∫°n 1975 - 1979 ƒë√£", opts:{A:"ho√†n th√†nh cu·ªôc c√°ch m·∫°ng t∆∞ s·∫£n d√¢n quy·ªÅn.",B:"b·∫£o v·ªá v·ªØng ch·∫Øc T·ªï qu·ªëc x√£ h·ªôi ch·ªß nghƒ©a.",C:"ho√†n th√†nh th·ªëng nh·∫•t ƒë·∫•t n∆∞·ªõc v·ªÅ m·∫∑t nh√† n∆∞·ªõc.",D:"m·ªü ra k·ªâ nguy√™n ƒë·∫•t n∆∞·ªõc ƒë·ªôc l·∫≠p, th·ªëng nh·∫•t."}, ans:"B"},
  {id:13, q:"Cu·ªôc ƒë·∫•u tranh b·∫£o v·ªá T·ªï qu·ªëc c·ªßa nh√¢n d√¢n Vi·ªát Nam giai ƒëo·∫°n 1975 - 1979 ƒë√£", opts:{A:"m·ªü ra k·ªâ nguy√™n ƒë·∫•t n∆∞·ªõc ƒë·ªôc l·∫≠p, th·ªëng nh·∫•t.",B:"ho√†n th√†nh cu·ªôc c√°ch m·∫°ng t∆∞ s·∫£n d√¢n quy·ªÅn.",C:"ho√†n th√†nh th·ªëng nh·∫•t ƒë·∫•t n∆∞·ªõc v·ªÅ m·∫∑t nh√† n∆∞·ªõc.",D:"ƒë·ªÉ l·∫°i nh·ªØng b√†i h·ªçc kinh nghi·ªám qu√Ω gi√° v·ªÅ sau."}, ans:"D"},
  {id:14, q:"Trong ƒë∆∞·ªùng l·ªëi ƒë·ªïi m·ªõi ƒë·∫•t n∆∞·ªõc c·ªßa ƒê·∫£ng C·ªông s·∫£n Vi·ªát Nam giai ƒëo·∫°n 1996 - 2006, n·ªôi dung n√†o sau ƒë√¢y l√† m·ªôt trong nh·ªØng ch·ªß tr∆∞∆°ng ƒë·ªïi m·ªõi v·ªÅ ch√≠nh tr·ªã?", opts:{A:"C·∫£i c√°ch t·ªï ch·ª©c Nh√† n∆∞·ªõc ph√°p quy·ªÅn x√£ h·ªôi ch·ªß nghƒ©a.",B:"Ph√°t tri·ªÉn gi√°o d·ª•c - ƒë√†o t·∫°o v√† khoa h·ªçc ‚Äì c√¥ng ngh·ªá.",C:"X√¢y d·ª±ng v√† ph√°t tri·ªÉn n·ªÅn vƒÉn ho√° d√¢n t·ªôc ti√™n ti·∫øn.",D:"X√¢y d·ª±ng v√† c·ªßng c·ªë n·ªÅn qu·ªëc ph√≤ng to√†n d√¢n."}, ans:"A"},
  {id:15, q:"N·ªôi dung n√†o sau ƒë√¢y kh√¥ng ph·∫£i √Ω nghƒ©a c·ªßa th√†nh t·ª±u kinh t·∫ø c·ªßa Vi·ªát Nam th·ªùi k√¨ ƒê·ªïi m·ªõi?", opts:{A:"C·∫£i thi·ªán ƒë·ªùi s·ªëng v√† thu nh·∫≠p c·ªßa c√°c t·∫ßng l·ªõp nh√¢n d√¢n.",B:"ƒê∆∞a Vi·ªát Nam tho√°t kh·ªèi kh·ªßng ho·∫£ng kinh t·∫ø - x√£ h·ªôi.",C:"ƒê∆∞a Vi·ªát Nam tr·ªü th√†nh n·ªÅn kinh t·∫ø l·ªõn nh·∫•t ƒê√¥ng Nam √Å.",D:"T·∫°o ƒëi·ªÅu ki·ªán thu·∫≠n l·ª£i ƒë·ªÉ h·ªôi nh·∫≠p qu·ªëc t·∫ø to√†n di·ªán."}, ans:"C"},
  {id:16, q:"NƒÉm 1950, Ch√≠nh ph·ªß Vi·ªát Nam D√¢n ch·ªß C·ªông h√≤a thi·∫øt l·∫≠p quan h·ªá ngo·∫°i giao v·ªõi c√°c qu·ªëc gia n√†o sau ƒë√¢y?", opts:{A:"Trung Qu·ªëc v√† Li√™n X√¥.",B:"Nh·∫≠t B·∫£n v√† Trung Qu·ªëc.",C:"L√†o v√† Cam-pu-chia.",D:"H√†n Qu·ªëc v√† Li√™n X√¥"}, ans:"A"},
  {id:17, q:"Sau C√°ch m·∫°ng th√°ng T√°m ƒë·∫øn tr∆∞·ªõc th√°ng 2/1946, Ch√≠nh ph·ªß Vi·ªát Nam D√¢n ch·ªß C·ªông h√≤a th·ª±c hi·ªán ƒë∆∞·ªùng l·ªëi ƒë·ªëi ngo·∫°i v·ªõi Trung Qu·ªëc l√†", opts:{A:"nh√¢n nh∆∞·ª£ng, h√≤a ho√£n.",B:"·ªïn ƒë·ªãnh v√† ph√°t tri·ªÉn.",C:"l√°ng gi·ªÅng th√¢n thi·∫øt.",D:"h·ª£p t√°c to√†n di·ªán."}, ans:"A"},
  {id:18, q:"N·ªôi dung n√†o sau ƒë√¢y ph·∫£n √°nh ƒë√∫ng m·ª•c ƒë√≠ch ch·ªß y·∫øu c·ªßa Phan B·ªôi Ch√¢u trong th·ªùi gian ho·∫°t ƒë·ªông t·∫°i Nh·∫≠t B·∫£n (nh·ªØng nƒÉm ƒë·∫ßu th·∫ø k·ªâ XX)?", opts:{A:"H·ªçc h·ªèi Nh·∫≠t B·∫£n ƒë·ªÉ ph√°t tri·ªÉn kinh t·∫ø.",B:"C·∫ßu vi·ªán Nh·∫≠t B·∫£n gi√∫p ƒë·ª° ƒë√°nh Ph√°p.",C:"Gi·ªõi thi·ªáu v·ªÅ ƒë·∫•t n∆∞·ªõc con ng∆∞·ªùi Vi·ªát Nam.",D:"C·ªßng c·ªë m·ªëi quan h·ªá ngo·∫°i giao v·ªõi Nh·∫≠t."}, ans:"B"},
  {id:19, q:"Vi·ªác h·ªçc t·∫≠p v√† l√†m theo t∆∞ t∆∞·ªüng, ƒë·∫°o ƒë·ª©c, phong c√°ch H·ªì Ch√≠ Minh ƒë∆∞·ª£c ƒê·∫£ng v√† Nh√† n∆∞·ªõc Vi·ªát Nam x√°c ƒë·ªãnh g·∫Øn v·ªõi qu√° tr√¨nh", opts:{A:"x√¢y d·ª±ng v√† ph√°t tri·ªÉn vƒÉn h√≥a, con ng∆∞·ªùi Vi·ªát Nam.",B:"m·ªü r·ªông quan h·ªá ngo·∫°i giao v·ªõi c√°c n∆∞·ªõc tr√™n th·∫ø gi·ªõi.",C:"ph√°t tri·ªÉn c√°c khu c√¥ng nghi·ªáp v√† khu ch·∫ø xu·∫•t hi·ªán ƒë·∫°i.",D:"x√¢y d·ª±ng v√† ph√°t tri·ªÉn c∆° s·ªü h·∫° t·∫ßng giao th√¥ng hi·ªán ƒë·∫°i."}, ans:"A"},
  {id:20, q:"Trong qu√° tr√¨nh ho·∫°t ƒë·ªông c√°ch m·∫°ng t·ª´ 1920 ƒë·∫øn 1945, Nguy·ªÖn √Åi Qu·ªëc kh√¥ng c√≥ ho·∫°t ƒë·ªông n√†o sau ƒë√¢y?", opts:{A:"Xu·∫•t b·∫£n t·ªù b√°o Ng∆∞·ªùi c√πng kh·ªï.",B:"M·ªü l·ªõp ƒë√†o t·∫°o c√°n b·ªô c√°ch m·∫°ng.",C:"L√£nh ƒë·∫°o cu·ªôc kh·ªüi nghƒ©a Y√™n B√°i.",D:"Vi·∫øt t√°c ph·∫©m Tuy√™n ng√¥n ƒë·ªôc l·∫≠p."}, ans:"C"},
  {id:21, q:"Nh·∫≠n ƒë·ªãnh n√†o sau ƒë√¢y l√† ƒë√∫ng ƒë·ªÉ l√Ω gi·∫£i nguy√™n nh√¢n t·ª´ nƒÉm 1945 ƒë·∫øn nƒÉm 2000, s·ªë l∆∞·ª£ng th√†nh vi√™n c·ªßa Li√™n h·ª£p qu·ªëc tƒÉng nhanh?", opts:{A:"Phong tr√†o ƒë·∫•u tranh gi·∫£i ph√≥ng d√¢n t·ªôc th·∫Øng l·ª£i nhi·ªÅu qu·ªëc gia ƒë√£ gi√†nh ƒë∆∞·ª£c ƒë·ªôc l·∫≠p.",B:"C√°c n∆∞·ªõc ƒëang ph√°t tri·ªÉn mu·ªën gia nh·∫≠p Li√™n h·ª£p qu·ªëc ƒë·ªÉ nh·∫≠n ƒë∆∞·ª£c vi·ªán tr·ª£ kinh t·∫ø.",C:"T√°c ƒë·ªông c·ªßa t√≠ch c·ª±c c·ªßa M·ªπ v√† Li√™n X√¥ ƒë·∫øn tr·∫≠t t·ª± th·∫ø gi·ªõi 2 c·ª±c v√† Chi·∫øn tranh l·∫°nh.",D:"Kh·ªßng ho·∫£ng kinh t·∫ø to√†n c·∫ßu ƒë·∫∑t ra y√™u c·∫ßu th√†nh l·∫≠p nhi·ªÅu qu·ªëc gia m·ªõi ƒë·ªÉ gi·∫£i quy·∫øt."}, ans:"A"},
  {id:22, q:"Th·ª±c ti·ªÖn c√°ch m·∫°ng t·ª´ khi ƒê·∫£ng C·ªông s·∫£n Vi·ªát Nam ra ƒë·ªùi t·ª´ nƒÉm 1930 ƒë·∫øn nay, vi·ªác c·ªßng c·ªë, tƒÉng c∆∞·ªùng kh·ªëi ƒë·∫°i ƒëo√†n k·∫øt to√†n d√¢n ƒë√£ ch·ª©ng minh", opts:{A:"m·ªôt d√¢n t·ªôc nh·ªè b√©, n·∫øu ƒëo√†n k·∫øt nh·∫•t tr√≠ cu·ªëi c√πng nh·∫•t ƒë·ªãnh th·∫Øng l·ª£i.",B:"cho vi·ªác g√≥p ph·∫ßn v√†o b·∫£o v·ªá h√≤a b√¨nh, ·ªïn ƒë·ªãnh v√† an ninh th·∫ø gi·ªõi.",C:"kh·ªëi ƒëo√†n k·∫øt l√† nguy√™n nh√¢n duy nh·∫•t d·∫´n ƒë·∫øn th·∫Øng l·ª£i c·ªßa c√°ch m·∫°ng.",D:"kh·ªëi ƒëo√†n k·∫øt l√† nh√¢n t·ªë duy nh·∫•t quy·∫øt ƒë·ªãnh m·ªçi th·∫Øng l·ª£i c·ªßa c√°ch m·∫°ng."}, ans:"A"},
  {id:23, q:"Th·ª±c ti·ªÖn nh·ªØng th√†nh t·ª±u ƒë·ªïi m·ªõi ·ªü Vi·ªát Nam (t·ª´ nƒÉm 1986) ƒë√£ ch·ª©ng t·ªè", opts:{A:"ƒë∆∞·ªùng l·ªëi ƒë·ªïi m·ªõi c·ªßa ƒê·∫£ng l√† nh√¢n t·ªë quy·∫øt ƒë·ªãnh th√†nh c√¥ng.",B:"ƒë·ªïi m·ªõi ch√≠nh tr·ªã lu√¥n ƒëi tr∆∞·ªõc m·ªü ƒë∆∞·ªùng cho ƒë·ªïi m·ªõi kinh t·∫ø.",C:"c√°c y·∫øu t·ªë b√™n ngo√†i quy·∫øt ƒë·ªãnh th√†nh c√¥ng c·ªßa c√¥ng cu·ªôc ƒê·ªïi m·ªõi.",D:"ƒë·ªïi m·ªõi vƒÉn ho√° - gi√°o d·ª•c c·∫ßn ƒë∆∞·ª£c ∆∞u ti√™n h∆°n c√°c lƒ©nh v·ª±c kh√°c."}, ans:"A"},
  {id:24, q:"Nh·∫≠n ƒë·ªãnh n√†o sau ƒë√¢y l√† ƒë√∫ng v·ªÅ vai tr√≤ c·ªßa Nguy·ªÖn √Åi Qu·ªëc ‚Äì H·ªì Ch√≠ Minh ƒë·ªëi v·ªõi c√°ch m·∫°ng Vi·ªát Nam trong giai ƒëo·∫°n 1920 ƒë·∫øn 1945?", opts:{A:"V·∫°ch ra ƒë∆∞·ªùng l·ªëi kh√°ng chi·∫øn ch·ªëng Ph√°p ƒë√∫ng ƒë·∫Øn, s√°ng t·∫°o.",B:"X√°c ƒë·ªãnh ƒë√∫ng nhi·ªám v·ª• cho c√°ch m·∫°ng hai mi·ªÅn Nam - B·∫Øc.",C:"Tr·ª±c ti·∫øp l√£nh ƒë·∫°o v√† t·ªï ch·ª©c phong tr√†o X√¥ vi·∫øt Ngh·ªá - Tƒ©nh.",D:"ƒê·∫∑t n·ªÅn m√≥ng cho m·ªëi li√™n h·ªá gi·ªØa c√°ch m·∫°ng Vi·ªát Nam v√† th·∫ø gi·ªõi."}, ans:"D"}
];

const P2 = [
  {
    id:"P2Q1", qnum:1,
    intro:"Cho nh·ªØng th√¥ng tin trong b·∫£ng sau ƒë√¢y:",
    type:"table",
    tableData:[
      {period:"1975 -1979", content:"Trung Qu·ªëc li√™n t·ª•c c√≥ c√°c h√†nh ƒë·ªông khi√™u kh√≠ch x√¢m ph·∫°m bi√™n gi·ªõi Vi·ªát Nam."},
      {period:"17/02/1979", content:"Trung Qu·ªëc ƒë∆∞a 60 v·∫°n qu√¢n t·∫•n c√¥ng 6 t·ªânh bi√™n gi·ªõi ph√≠a B·∫Øc Vi·ªát Nam."},
      {period:"05/03/1979", content:"Trung Qu·ªëc tuy√™n b·ªë r√∫t qu√¢n kh·ªèi Vi·ªát Nam."},
      {period:"1979-1989", content:"Xung ƒë·ªôt Vi·ªát-Trung v·∫´n di·ªÖn ra, ƒë·∫∑c bi·ªát ·ªü m·∫∑t tr·∫≠n V·ªã Xuy√™n."}
    ],
    subs:[
      {key:"a", text:"T∆∞ li·ªáu ƒë·ªÅ c·∫≠p ƒë·∫øn nh·ªØng di·ªÖn bi·∫øn ch√≠nh trong m·ªëi quan h·ªá cƒÉng th·∫≥ng gi·ªØa Vi·ªát Nam v√† Trung Qu·ªëc sau nƒÉm 1975.", ans:true},
      {key:"b", text:"Sau nƒÉm 1975, Trung Qu·ªëc ƒë√£ c√≥ nh·ªØng h√†nh ƒë·ªông g√¢y t·ªïn h·∫°i ƒë·∫øn quan h·ªá h·ªØu ngh·ªã truy·ªÅn th·ªëng gi·ªØa hai n∆∞·ªõc.", ans:true},
      {key:"c", text:"NƒÉm 1975, Trung Qu·ªëc ƒë√£ ti·∫øn h√†nh cu·ªôc chi·∫øn tranh x√¢m l∆∞·ª£c bi√™n gi·ªõi ph√≠a B·∫Øc Vi·ªát Nam, k√©o d√†i ƒë·∫øn 1989.", ans:false},
      {key:"d", text:"M·ªëi quan h·ªá cƒÉng th·∫≥ng gi·ªØa Vi·ªát Nam v√† Trung Qu·ªëc sau nƒÉm 1975 ph·∫£n √°nh ƒë·∫∑c ƒëi·ªÉm c·ªßa tr·∫≠t t·ª± hai c·ª±c Ianta.", ans:false}
    ]
  },
  {
    id:"P2Q2", qnum:2,
    intro:"Cho ƒëo·∫°n t∆∞ li·ªáu sau ƒë√¢y:",
    type:"quote",
    quote:`"S·ª± ra ƒë·ªùi hai h·ªçc thuy·∫øt ph·∫£n √°nh hai √Ω th·ª©c h·ªá ƒë·ªëi l·∫≠p nhau ƒë∆∞·ª£c s·ª≠ d·ª•ng l√†m c∆° s·ªü t∆∞ t∆∞·ªüng cho hai c·ª±c trong tr·∫≠t t·ª± th·∫ø gi·ªõi sau Chi·∫øn tranh th·∫ø gi·ªõi th·ª© hai - Tr·∫≠t t·ª± I-an-ta; v√† c≈©ng l√† s·ª± kh·ªüi ƒë·∫ßu cho m·ªëi quan h·ªá qu·ªëc t·∫ø mang h√¨nh th√°i Chi·∫øn tranh l·∫°nh, m·ªôt cu·ªôc chi·∫øn tuy kh√¥ng n·ªï s√∫ng, kh√¥ng ƒë·ªï m√°u nh∆∞ng lu√¥n cƒÉng th·∫≥ng, gay g·∫Øt nh·∫±m lo·∫°i tr·ª´ l·∫´n nhau, ti√™u di·ªát nhau. Chi·∫øn tranh kh√¥ng b√πng n·ªï tr√™n ph·∫°m vi th·∫ø gi·ªõi, song ƒë√¢y ƒë√≥ tr√™n Tr√°i ƒê·∫•t, kh√¥ng l√∫c n√†o ng·ª´ng ti·∫øng s√∫ng, ng·ª´ng ƒë·ªï m√°u m√† ·ªü ph√≠a sau v·∫´n l√† s·ª± d√≠nh l√≠u c·ªßa c√°c n∆∞·ªõc l·ªõn. ƒêi·ªÅu ƒë√≥ l√†m cho t√¨nh h√¨nh di·ªÖn bi·∫øn r·∫•t ph·ª©c t·∫°p, t√°c ƒë·ªông s√¢u s·∫Øc ƒë·∫øn v·∫≠n m·ªánh c√°c qu·ªëc gia, d√¢n t·ªôc".`,
    source:"(GS. V≈© D∆∞∆°ng Ninh, Quan h·ªá ƒë·ªëi ngo·∫°i Vi·ªát Nam (1940 - 2020),\nNXB Ch√≠nh tr·ªã Qu·ªëc gia S·ª± th·∫≠t, 2022, tr.115)",
    subs:[
      {key:"a", text:"T∆∞ li·ªáu ƒë·ªÅ c·∫≠p ƒë·∫øn nh·ªØng ƒë·∫∑c ƒëi·ªÉm v√† t√°c ƒë·ªông c·ªßa Tr·∫≠t t·ª± hai c·ª±c v√† Chi·∫øn tranh l·∫°nh sau Chi·∫øn tranh th·∫ø gi·ªõi th·ª© hai.", ans:true},
      {key:"b", text:"Sau Chi·∫øn tranh th·∫ø gi·ªõi th·ª© hai, do ƒë·ªëi l·∫≠p v·ªÅ m·ª•c ti√™u v√† chi·∫øn l∆∞·ª£c, Li√™n X√¥ v√† M·ªπ ƒë√£ ƒë·ªëi ƒë·∫ßu v√† ƒëi t·ªõi Chi·∫øn tranh l·∫°nh.", ans:true},
      {key:"c", text:"Chi·∫øn tranh l·∫°nh l√† cu·ªôc chi·∫øn tranh kh√¥ng ti·∫øng s√∫ng v√† ƒë∆∞·ª£c bi·ªÉu hi·ªán ch·ªß y·∫øu qua c√°c cu·ªôc chi·∫øn tranh c·ª•c b·ªô.", ans:false},
      {key:"d", text:"Chi·∫øn tranh l·∫°nh ƒë√£ ƒë·ªãnh h√¨nh quan h·ªá qu·ªëc t·∫ø, quy·∫øt ƒë·ªãnh v·∫≠n m·ªánh c·ªßa c√°c qu·ªëc gia, d√¢n t·ªôc, nh·∫•t l√† c√°c thu·ªôc ƒë·ªãa.", ans:false}
    ]
  },
  {
    id:"P2Q3", qnum:3,
    intro:"Cho ƒëo·∫°n t∆∞ li·ªáu sau ƒë√¢y:",
    type:"quote",
    quote:`"Vi·ªác Vi·ªát Nam tham gia ASEAN ƒë√£ g√≥p ph·∫ßn quan tr·ªçng th√∫c ƒë·∫©y vi·ªác th√†nh l·∫≠p m·ªôt ASEAN bao g·ªìm c·∫£ 10 n∆∞·ªõc ƒê√¥ng Nam √Å, ch·∫•m d·ª©t t√¨nh tr·∫°ng chia r·∫Ω, ƒë·ªëi ƒë·∫ßu, cƒÉng th·∫≥ng ·ªü khu v·ª±c, m·ªü ra m·ªôt giai ƒëo·∫°n m·ªõi kh√°c h·∫≥n v·ªÅ ch·∫•t c·ªßa quan h·ªá gi·ªØa c√°c qu·ªëc gia ·ªü khu v·ª±c; m·ªü r·ªông h·ª£p t√°c v√¨ h√≤a b√¨nh ph√°t tri·ªÉn, ƒë·ªÉ ASEAN th·ª±c s·ª± l√† c·ªßa ƒê√¥ng Nam √Å v√† v√¨ ƒê√¥ng Nam √Å".`,
    source:"(H·ªçc vi·ªán Ngo·∫°i giao, Vi·ªát Nam trong ti·∫øn tr√¨nh h·ªôi nh·∫≠p v√† ph√°t tri·ªÉn,\nNxb. Ch√≠nh tr·ªã qu·ªëc gia, H√† N·ªôi, 2009, tr. 292)",
    subs:[
      {key:"a", text:"Vi·ªát Nam gia nh·∫≠p ASEAN v√†o nƒÉm 1995 ƒë√£ bi·∫øn ƒê√¥ng Nam √Å th√†nh t·ªï ch·ª©c to√†n khu v·ª±c v·ªõi 10 th√†nh vi√™n.", ans:false},
      {key:"b", text:"Khi Vi·ªát Nam gia nh·∫≠p ASEAN, ƒë√£ g√≥p ph·∫ßn ch·∫•m d·ª©t t√¨nh tr·∫°ng chia r·∫Ω, ƒë·ªëi ƒë·∫ßu, cƒÉng th·∫≥ng ·ªü ƒê√¥ng Nam √Å.", ans:true},
      {key:"c", text:"T·ª´ sau nƒÉm 1995, ƒê√¥ng Nam √Å ƒë√£ ho√†n th√†nh x√¢y d·ª±ng ASEAN th√†nh m·ªôt t·ªï ch·ª©c ho√†n ch·ªânh, h·ª£p t√°c to√†n di·ªán.", ans:false},
      {key:"d", text:"T·ªï ch·ª©c ASEAN l√† bi·ªÉu hi·ªán r√µ n√©t cho s·ª± th√†nh c√¥ng c·ªßa qu√° tr√¨nh h·ª£p t√°c khu v·ª±c v√¨ h√≤a b√¨nh, ·ªïn ƒë·ªãnh, ph√°t tri·ªÉn.", ans:true}
    ]
  },
  {
    id:"P2Q4", qnum:4,
    intro:"Cho ƒëo·∫°n t∆∞ li·ªáu sau ƒë√¢y:",
    type:"quote",
    quote:`"Trong n·ª≠a sau th·∫ø k·ªâ XX, c√≥ m·ªôt t·ª´ ƒë√£ xu·∫•t hi·ªán trong ti·∫øng n√≥i c·ªßa nh·ªØng ng∆∞·ªùi b·∫£o v·ªá v√† ki·∫øn t·∫°o h√≤a b√¨nh tr√™n th·∫ø gi·ªõi, m·ªôt t·ª´ m√† c√πng m·ªôt l√∫c r·∫•t nhi·ªÅu √Ω nghƒ©a: ƒë·∫•u tranh, d≈©ng c·∫£m, anh h√πng; v√† n√≥ c√≤n c√≥ √Ω nghƒ©a l√† chi·∫øn th·∫Øng, ƒë·ªôc l·∫≠p, t·ª± do. T·ª´ ƒë√≥ l√† Vi·ªát Nam. V√† c√≥ m·ªôt c√°i t√™n ƒë√£ lu√¥n g·∫Øn li·ªÅn v·ªõi t·ª´ n√†y ‚Äì t·ª´ ch·ªâ t√™n c·ªßa m·ªôt ƒë·∫•t n∆∞·ªõc. ƒê√≥ l√† H·ªì Ch√≠ Minh".`,
    source:"(Ro-m√©t Chan-ƒë·ªù-ra: Vi·ªát Nam trong th·∫ø k·ªâ XX, T·∫≠p 1,\nNXB Ch√≠nh tr·ªã Qu·ªëc gia, H√† N·ªôi, 2001, tr.48)",
    subs:[
      {key:"a", text:"T∆∞ li·ªáu ƒë·ªÅ c·∫≠p ƒë·∫øn v·ªã tr√≠ c·ªßa Vi·ªát Nam l√† l·ª±c l∆∞·ª£ng l√£nh ƒë·∫°o phong tr√†o gi·∫£i ph√≥ng d√¢n t·ªôc tr√™n th·∫ø gi·ªõi ·ªü th·∫ø k·ª∑ XX.", ans:false},
      {key:"b", text:"Trong n·ª≠a sau th·∫ø k·ª∑ XX, Vi·ªát Nam ƒë√£ tr·ªü th√†nh bi·ªÉu t∆∞·ª£ng c·ªßa h√≤a b√¨nh, ƒë·ªôc l·∫≠p, t·ª± do, c√°c gi√° tr·ªã m√† nh√¢n lo·∫°i h∆∞·ªõng ƒë·∫øn.", ans:true},
      {key:"c", text:"Th·∫Øng l·ª£i c·ªßa cu·ªôc ƒë·∫•u tranh gi·∫£i ph√≥ng ·ªü Vi·ªát Nam ƒë√£ kh·∫≥ng ƒë·ªãnh vai tr√≤ l√£nh ƒë·∫°o c·ªßa H·ªì Ch√≠ Minh ƒë·ªëi v·ªõi c√°ch m·∫°ng th·∫ø gi·ªõi.", ans:false},
      {key:"d", text:"Vi·ªát Nam th·∫ø k·ª∑ XX ƒë√£ tr·ªü th√†nh t·∫•m g∆∞∆°ng cho c√°c d√¢n t·ªôc ƒëang ƒë·∫•u tranh nh·∫±m b·∫£o v·ªá v√† ki·∫øn t·∫°o h√≤a b√¨nh th·∫ø gi·ªõi.", ans:true}
    ]
  }
];

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  STATE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let timeLeft = 45*60, timer = null, submitted = false;
let q1List = [], ans1 = {}, ans2 = {};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  UTILS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const shuffle = a => { const b=[...a]; for(let i=b.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[b[i],b[j]]=[b[j],b[i]];} return b; };

function shuffleOpts(opts){
  const keys = shuffle(Object.keys(opts));
  const no={}, km={};
  keys.forEach((ok,i)=>{ const nk=['A','B','C','D'][i]; no[nk]=opts[ok]; km[ok]=nk; });
  return {no, km};
}

function fmtTime(s){
  return `${String(Math.floor(s/60)).padStart(2,'0')}:${String(s%60).padStart(2,'0')}`;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  BUILD
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function buildP1(){
  const wrap = document.getElementById('p1Wrap');
  wrap.innerHTML='';
  q1List = shuffle(P1).map((q,i)=>{
    const {no,km} = shuffleOpts(q.opts);
    return {...q, dn:i+1, opts:no, cdk:km[q.ans], km};
  });
  ans1={};
  q1List.forEach(q=>{
    const card = document.createElement('div');
    card.className='qcard'; card.id=`qc_${q.id}`;
    let oh='';
    Object.entries(q.opts).forEach(([k,v])=>{
      oh+=`<label class="opt" id="op_${q.id}_${k}" onclick="selOpt(${q.id},'${k}')">
        <input type="radio" name="q_${q.id}" value="${k}">
        <span class="opt-k">${k}</span><span>${v}</span>
      </label>`;
    });
    card.innerHTML=`
      <div class="qnum">C√¢u ${q.dn} <span style="font-style:italic;color:var(--soft);font-weight:400;font-size:.65rem;margin-left:4px;">[ID:${q.id}]</span></div>
      <div class="qtag" id="qt_${q.id}"></div>
      <div class="qtext">${q.q}</div>
      <div class="opts">${oh}</div>`;
    wrap.appendChild(card);
  });
}

function buildP2(){
  const wrap = document.getElementById('p2Wrap');
  wrap.innerHTML=''; ans2={};
  P2.forEach(q=>{
    const card = document.createElement('div');
    card.className='p2card';
    let ctx='';
    if(q.type==='table'){
      const rows=q.tableData.map(r=>`<tr><td>${r.period}</td><td>${r.content}</td></tr>`).join('');
      ctx=`<div class="tbl-wrap"><table class="p2-tbl"><thead><tr><th>Th·ªùi gian</th><th>Ho·∫°t ƒë·ªông</th></tr></thead><tbody>${rows}</tbody></table></div>`;
    } else {
      const lines=q.quote.split('\n').map(l=>l.startsWith('\t')?`<span style="display:block;text-indent:2em;">${l.slice(1)}</span>`:`<span style="display:block;">${l}</span>`).join('');
      ctx=`<div class="quote-box">${lines}<span class="quote-src">${q.source.replace(/\n/g,'<br>')}</span></div>`;
    }
    let shtml='';
    q.subs.forEach(s=>{
      const sid=`${q.id}_${s.key}`; ans2[sid]=null;
      shtml+=`<div class="sub" id="si_${sid}">
        <div class="sub-lbl">√ù ${s.key})</div>
        <div class="sub-txt">${s.text}</div>
        <div class="tf-row">
          <label class="tf-btn" id="tf_${sid}_T" onclick="selTF('${sid}',true)"><input type="radio"> ‚úì ƒê√∫ng</label>
          <label class="tf-btn" id="tf_${sid}_F" onclick="selTF('${sid}',false)"><input type="radio"> ‚úó Sai</label>
        </div>
        <div class="sub-note" id="sn_${sid}"></div>
      </div>`;
    });
    card.innerHTML=`
      <div class="qnum" style="margin-bottom:12px;">C√¢u ${q.qnum} <span style="font-weight:400;color:var(--soft);font-size:.7rem;font-style:italic;margin-left:4px;">(Ph·∫ßn II)</span></div>
      <div class="p2-intro">${q.intro}</div>
      ${ctx}${shtml}`;
    wrap.appendChild(card);
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  INTERACTIONS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function selOpt(qid, key){
  if(submitted) return;
  const q = q1List.find(x=>x.id===qid);
  ans1[qid]=key;
  Object.keys(q.opts).forEach(k=>{ document.getElementById(`op_${qid}_${k}`).classList.remove('sel'); });
  document.getElementById(`op_${qid}_${key}`).classList.add('sel');
  document.getElementById(`qc_${qid}`).classList.add('done');
  updateProg();
}

function selTF(sid, val){
  if(submitted) return;
  ans2[sid]=val;
  const tl=document.getElementById(`tf_${sid}_T`);
  const fl=document.getElementById(`tf_${sid}_F`);
  tl.classList.remove('sel-t','sel-f'); fl.classList.remove('sel-t','sel-f');
  val ? tl.classList.add('sel-t') : fl.classList.add('sel-f');
  document.getElementById(`si_${sid}`).classList.add('done');
  updateProg();
}

function updateProg(){
  const done1 = Object.values(ans1).filter(v=>v).length;
  const done2 = Object.values(ans2).filter(v=>v!==null).length;
  const total=40, done=done1+done2;
  document.getElementById('progFill').style.width=(done/total*100)+'%';
  document.getElementById('doneCount').textContent=done;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  TIMER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function startTimer(){
  timer = setInterval(()=>{
    if(submitted){clearInterval(timer);return;}
    timeLeft--;
    const el=document.getElementById('timerVal');
    el.textContent=fmtTime(timeLeft);
    el.className='timer-val';
    if(timeLeft<=300) el.classList.add('warn');
    if(timeLeft<=60) el.classList.add('danger');
    if(timeLeft<=0){ clearInterval(timer); triggerTimeUp(); }
  },1000);
}

function triggerTimeUp(){
  document.getElementById('timeupOverlay').classList.add('show');
  let cd=3;
  document.getElementById('timeupCd').textContent=cd;
  document.getElementById('timeupBar').style.width='100%';
  const iv=setInterval(()=>{
    cd--;
    document.getElementById('timeupCd').textContent=cd;
    document.getElementById('timeupBar').style.width=(cd/3*100)+'%';
    if(cd<=0){
      clearInterval(iv);
      document.getElementById('timeupOverlay').classList.remove('show');
      doSubmit();
    }
  },1000);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  CONFIRM MODAL
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openConfirm(){
  if(submitted) return;
  const done1=Object.values(ans1).filter(v=>v).length;
  const done2=Object.values(ans2).filter(v=>v!==null).length;
  const total=40, done=done1+done2, left=total-done;
  document.getElementById('confDone').textContent=done;
  document.getElementById('confLeft').textContent=left;
  document.getElementById('confTime').textContent=fmtTime(timeLeft);
  if(left>0){
    document.getElementById('confIcon').textContent='‚ö†Ô∏è';
    document.getElementById('confTitle').textContent='C√≤n c√¢u ch∆∞a l√†m!';
    document.getElementById('confMsg').innerHTML=`B·∫°n c√≤n <strong style="color:var(--red)">${left} c√¢u</strong> ch∆∞a tr·∫£ l·ªùi. Nh·ªØng c√¢u b·ªè tr·ªëng s·∫Ω b·ªã t√≠nh <strong>0 ƒëi·ªÉm</strong>. B·∫°n c√≥ ch·∫Øc mu·ªën n·ªôp?`;
  } else {
    document.getElementById('confIcon').textContent='üéØ';
    document.getElementById('confTitle').textContent='S·∫µn s√†ng n·ªôp b√†i?';
    document.getElementById('confMsg').textContent='B·∫°n ƒë√£ ho√†n th√†nh t·∫•t c·∫£ c√°c c√¢u. X√°c nh·∫≠n n·ªôp b√†i v√† xem k·∫øt qu·∫£.';
  }
  document.getElementById('confirmOverlay').classList.add('show');
}

function closeConfirm(){
  document.getElementById('confirmOverlay').classList.remove('show');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  SUBMIT & SCORE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function doSubmit(){
  document.getElementById('confirmOverlay').classList.remove('show');
  if(submitted) return;
  submitted=true; clearInterval(timer);
  document.getElementById('unansStrip').classList.remove('show');
  document.getElementById('btnSub').disabled=true;
  document.getElementById('btnSub').textContent='‚úÖ  ƒê√£ n·ªôp b√†i';

  const sc=calcScore();
  renderResult(sc);
  showAns();
  window.scrollTo({top:0,behavior:'smooth'});
}

function calcScore(){
  let c1=0,w1=0;
  q1List.forEach(q=>{
    const ch=ans1[q.id];
    if(ch===q.cdk) c1++; else w1++;
  });
  let p2=0;
  P2.forEach(q=>{
    let cor=0;
    q.subs.forEach(s=>{ if(ans2[`${q.id}_${s.key}`]===s.ans) cor++; });
    if(cor===1) p2+=0.1;
    else if(cor===2) p2+=0.25;
    else if(cor===3) p2+=0.5;
    else if(cor===4) p2+=1.0;
  });
  return {c1,w1,p1:c1*0.25,p2,total:c1*0.25+p2};
}

function renderResult({c1,w1,p1,p2,total}){
  const panel=document.getElementById('resPanel');
  panel.classList.add('show');

  const big=document.getElementById('resBig');
  big.textContent=total.toFixed(2);
  const bar=document.getElementById('resBar');
  const pct=Math.round(total/10*100);

  setTimeout(()=>{ bar.style.width=pct+'%'; },50);

  if(total>=8){ big.className='res-score-big great'; bar.className='res-bar-fill'; document.getElementById('resEmoji').textContent='üèÜ'; }
  else if(total>=5){ big.className='res-score-big mid'; bar.className='res-bar-fill mid'; document.getElementById('resEmoji').textContent='üìò'; }
  else{ big.className='res-score-big low'; bar.className='res-bar-fill low'; document.getElementById('resEmoji').textContent='üìñ'; }

  document.getElementById('resPct').textContent=`${pct}% s·ªë ƒëi·ªÉm t·ªëi ƒëa`;
  document.getElementById('rkC1').textContent=c1;
  document.getElementById('rkW1').textContent=w1;
  document.getElementById('rkP2').textContent=p2.toFixed(2);

  const msgs=['üí™ H√£y √¥n t·∫≠p th√™m v√† l√†m l·∫°i ƒë·ªÉ c·∫£i thi·ªán nh√©!','üìö C·∫ßn √¥n l·∫°i c√°c ph·∫ßn c√≤n sai ƒë·ªÉ ƒë·∫°t ƒëi·ªÉm cao h∆°n.','üëç Kh√° t·ªët! √în l·∫°i v√†i ph·∫ßn n·ªØa l√† xu·∫•t s·∫Øc r·ªìi!','üèÖ T·ªët l·∫Øm! B·∫°n n·∫Øm ki·∫øn th·ª©c kh√° v·ªØng.','üéâ Xu·∫•t s·∫Øc! B·∫°n th·∫≠t s·ª± n·∫Øm v·ªØng l·ªãch s·ª≠!'];
  document.getElementById('resMsg').textContent=msgs[Math.min(Math.floor(total/2),4)];
}

function showAns(){
  q1List.forEach(q=>{
    const ch=ans1[q.id], cor=q.cdk;
    const card=document.getElementById(`qc_${q.id}`);
    const tag=document.getElementById(`qt_${q.id}`);
    card.classList.remove('done');
    Object.keys(q.opts).forEach(k=>{
      const el=document.getElementById(`op_${q.id}_${k}`);
      el.classList.remove('sel'); el.classList.add('dis');
      if(k===cor) el.classList.add('cor');
    });
    if(ch){
      if(ch===cor){ card.classList.add('ok'); tag.className='qtag show ok'; tag.textContent='‚úì ƒê√∫ng'; }
      else{ document.getElementById(`op_${q.id}_${ch}`).classList.add('wrg'); card.classList.add('bad'); tag.className='qtag show bad'; tag.textContent='‚úó Sai'; }
    } else { card.classList.add('bad'); tag.className='qtag show skip'; tag.textContent='‚óã B·ªè tr·ªëng'; }
  });

  P2.forEach(q=>{
    q.subs.forEach(s=>{
      const sid=`${q.id}_${s.key}`;
      const ch=ans2[sid], cor=s.ans;
      const tl=document.getElementById(`tf_${sid}_T`);
      const fl=document.getElementById(`tf_${sid}_F`);
      const si=document.getElementById(`si_${sid}`);
      const sn=document.getElementById(`sn_${sid}`);
      tl.classList.add('dis'); fl.classList.add('dis');
      tl.classList.remove('sel-t','sel-f'); fl.classList.remove('sel-t','sel-f');
      cor ? tl.classList.add('cor-tf') : fl.classList.add('cor-tf');
      si.classList.remove('done');
      if(ch!==null){
        if(ch===cor){ si.classList.add('ok'); sn.className='sub-note show ok'; sn.textContent='‚úì Tr·∫£ l·ªùi ƒë√∫ng'; }
        else{
          si.classList.add('bad');
          ch ? tl.classList.add('wrg-tf') : fl.classList.add('wrg-tf');
          sn.className='sub-note show bad'; sn.textContent=`‚úó Sai ‚Äî ƒê√°p √°n ƒë√∫ng: ${cor?'ƒê√∫ng':'Sai'}`;
        }
      } else { si.classList.add('bad'); sn.className='sub-note show bad'; sn.textContent=`‚óã B·ªè tr·ªëng ‚Äî ƒê√°p √°n ƒë√∫ng: ${cor?'ƒê√∫ng':'Sai'}`; }
    });
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  RETRY
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function retryExam(){
  submitted=false; clearInterval(timer);
  timeLeft=45*60;
  document.getElementById('timerVal').textContent='45:00';
  document.getElementById('timerVal').className='timer-val';
  document.getElementById('progFill').style.width='0%';
  document.getElementById('doneCount').textContent='0';
  document.getElementById('resPanel').classList.remove('show');
  document.getElementById('btnSub').disabled=false;
  document.getElementById('btnSub').textContent='üìù  N·ªòP B√ÄI';
  buildP1(); buildP2(); startTimer();
  window.scrollTo({top:0,behavior:'smooth'});
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  INIT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
buildP1(); buildP2(); startTimer();
</script>
</body>
  </html>
